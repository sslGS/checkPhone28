jQuery(document).ready(function($) {
    jQuery("#uFname, #uUname, #uLname, #uEmail, #uUbirthday, #uUmsgApp1, #uUphone, #uUpass2, #uUmsgApp2").on("blur", function() {
        let cys = jQuery(this);
        j(cys);
        //o()
    });
    $('#uUphone').on('input', function() {
        $(this).val($(this).val().replace(/[A-Za-zА-Яа-яЁё]/, ''))
    });
    function checkPlace(){
        let placeholder_buffer = jQuery('#uUphone').attr('placeholder').replace(new RegExp("[0-9]", "g"), "9");
        jQuery('input[name="uUphone"]').unmask();
        jQuery('input[name="uUphone"]').mask(placeholder_buffer);
        function its_work_maybe() {
                if (jQuery("#uUphone").val().length < jQuery('#uUphone').attr('placeholder').length) {
                    jQuery("#uUphone").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery(".iti--allow-dropdown").next(".errorMsg").text("Phone isn't valid")
                    jQuery('#uUphone').removeAttr('maxlength')
                } else {
                    if (h(jQuery("#uUphone").val()) === 0) {
                        jQuery("#uUphone").addClass("uk-form-success").removeClass("uk-form-danger");
                        jQuery(".iti--allow-dropdown").next(".errorMsg").text("")
                        jQuery('#uUphone').removeAttr('maxlength')
                    } else {
                        jQuery(".iti--allow-dropdown").removeClass("uk-form-success").addClass("uk-form-danger");
                        jQuery(".iti--allow-dropdown").next(".errorMsg").text("Telephone number may only contain 0-9 +-()")
                        jQuery('#uUphone').removeAttr('maxlength')
                    }
                }
            }
        setTimeout(its_work_maybe, 10); 
    }
    jQuery('#uUphone, .iti__flag-container').on('change, blur', function() {
        checkPlace();
    });
    jQuery("#uUpass, #uUphone").on("keyup", function() {
        let sys = jQuery(this);
        j(sys);
        //o()
    });
    function j(i) {
        let id = i.attr("id");
        switch (id) {
        case "uFname":
            if (g(jQuery("#uFname").val()) === 0) {
                jQuery("#uFname").addClass("uk-form-success").removeClass("uk-form-danger");
                jQuery("#uFname").next("p").text("")
            } else {
                jQuery("#uFname").removeClass("uk-form-success").addClass("uk-form-danger");
                jQuery("#uFname").next("p").text("First name may only contain A-Z latin characters.")
            }
            break;
        case "uLname":
            if (g(jQuery("#uLname").val()) === 0) {
                jQuery("#uLname").addClass("uk-form-success").removeClass("uk-form-danger");
                jQuery("#uLname").next("p").text("")
            } else {
                jQuery("#uLname").removeClass("uk-form-success").addClass("uk-form-danger");
                jQuery("#uLname").next("p").text("Last name may only contain A-Z latin characters.")
            }
            break;
        case "uUname":
            if (g(jQuery("#uUname").val()) === 0) {
                jQuery("#uUname").addClass("uk-form-success").removeClass("uk-form-danger");
                jQuery("#uUname").next("p").text("")
            } else {
                jQuery("#uUname").removeClass("uk-form-success").addClass("uk-form-danger");
                jQuery("#uUname").next("p").text("Username name may only contain A-Z latin characters.")
            }
            break;
        case "uEmail":
            if (d(jQuery("#uEmail").val()) === 0) {
                jQuery("#uEmail").addClass("uk-form-success").removeClass("uk-form-danger");
                jQuery("#uEmail").next("p").text("")
            } else {
                jQuery("#uEmail").removeClass("uk-form-success").addClass("uk-form-danger");
                jQuery("#uEmail").next("p").text("Email may only contain A-Z, 0-9, underscores, and dashes.")
            }
            break;
        case "uUphone":
            if (jQuery("#uUphone").val().length < jQuery('#uUphone').attr('placeholder').length) {
                jQuery("#uUphone").removeClass("uk-form-success").addClass("uk-form-danger");
                jQuery(".iti--allow-dropdown").next(".errorMsg").text("Phone isn't valid")
                jQuery('#uUphone').removeAttr('maxlength')
            } else {
                if (h(jQuery("#uUphone").val()) === 0) {
                    jQuery("#uUphone").addClass("uk-form-success").removeClass("uk-form-danger");
                    jQuery(".iti--allow-dropdown").next(".errorMsg").text("")
                    jQuery('#uUphone').removeAttr('maxlength')
                } else {
                    jQuery(".iti--allow-dropdown").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery(".iti--allow-dropdown").next(".errorMsg").text("Telephone number may only contain 0-9 +-()")
                    jQuery('#uUphone').removeAttr('maxlength')
                }
            }
            break;
        case "uUpass":
            if ((jQuery("#uUpass").length) && (jQuery("#uUpass2").length)) {
                if (jQuery("#uUpass").val().length < 6) {
                    jQuery("#uUpass").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery("#uUpass").next("p").text("Password is too short (minimum is 6 characters)");
                } else {
                    if (p(jQuery("#uUpass").val()) === 0) {
                        jQuery("#uUpass").addClass("uk-form-success").removeClass("uk-form-danger");
                        jQuery("#uUpass").next("p").text("")
                    } else {
                        jQuery("#uUpass").removeClass("uk-form-success").addClass("uk-form-danger");
                        jQuery("#uUpass").next("p").text('Password may only contain /^[a-z A-Z 0-9 "!?.-]+$/')
                    } 
                }
                if (jQuery("#uUpass2").val().length >= 6) {
                    if (!(jQuery("#uUpass").val() == jQuery("#uUpass2").val())) {
                        jQuery("#uUpass2").removeClass("uk-form-success").addClass("uk-form-danger");
                        jQuery("#uUpass2").next("p").text('Password does not match')
                    } else if (p(jQuery("#uUpass2").val()) === 0) {
                        jQuery("#uUpass2, #uUpass").addClass("uk-form-success").removeClass("uk-form-danger");
                        jQuery("#uUpass2").next("p").text("")
                    } 
                }
            }
            break;
        case "uUpass2":
            if ((jQuery("#uUpass").length) && (jQuery("#uUpass2").length)) {
                if (!(jQuery("#uUpass").val() == jQuery("#uUpass2").val())) {
                    jQuery("#uUpass2").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery("#uUpass2").next("p").text('Password does not match')
                } else if (p(jQuery("#uUpass2").val()) === 0) {
                    jQuery("#uUpass2, #uUpass").addClass("uk-form-success").removeClass("uk-form-danger");
                    jQuery("#uUpass2").next("p").text("")
                } 
            }
            break;
        case "uUbirthday":
            if ((jQuery("#uUbirthday").length) && (jQuery("#uUbirthday").hasClass("uk-require"))) {
                var b = jQuery("#uUbirthday").val();
                if (b.length != 10) {
                    jQuery("#uUbirthday").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery("#uUbirthday").next("p").text("Invalid date format.")
                } else {
                    jQuery("#uUbirthday").addClass("uk-form-success").removeClass("uk-form-danger");
                    jQuery("#uUbirthday").next("p").text("")
                }
            }
            break;
        case "uUmsgApp1":
            if (jQuery("#uUmsgApp1").length && jQuery("#uUmsgApp1").hasClass("uk-require")) {
                let i = document.getElementById('uUmsgApp1');
                let b = jQuery("#uUmsgApp2").val();
                let c = i.options[i.selectedIndex].value;
                if (c == "select") {
                    jQuery("#uUmsgApp1").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery("#uUmsgApp1").next("p").text("Specify the type of messenger.")
                } else {
                    jQuery("#uUmsgApp1").addClass("uk-form-success").removeClass("uk-form-danger");
                    jQuery("#uUmsgApp1").next("p").text("")
                }
                /*cyr = /[a-zA-Z]/g;
                if (!cyr.test(b)) {
                    jQuery("#uUmsgApp2").removeClass("uk-form-success").addClass("uk-form-danger");
                    jQuery("#uUmsgApp2").next("p").text("Use only Latin characters.")
                }*/
            }
            break;
        case "uUmsgApp2":
            if (jQuery("#uUmsgApp1").length && jQuery("#uUmsgApp1").hasClass("uk-require")) {
                let i = document.getElementById('uUmsgApp1');
                let b = jQuery("#uUmsgApp2").val();
                let c = i.options[i.selectedIndex].value;
                if (c != "notuse") {
                    if (b.length < 3) {
                        jQuery("#uUmsgApp2").removeClass("uk-form-success").addClass("uk-form-danger");
                        jQuery("#uUmsgApp2").next("p").text("The contact in the messenger is not specified or specified incorrectly.")
                    } else {
                        jQuery("#uUmsgApp2").addClass("uk-form-success").removeClass("uk-form-danger");
                        jQuery("#uUmsgApp2").next("p").text("")
                    }
                }
                if (c == "notuse") {
                    jQuery("#uUmsgApp2").removeClass("uk-form-success").removeClass("uk-form-danger");
                    jQuery("#uUmsgApp2").val("");
                    jQuery("#uUmsgApp2").next("p").text("")
                }
            }
            break
        }
    }
    function p(b) {
        let f = /[a-zA-Z-0-9]/g.test(b);
        let m = /[^\w\!\"\#\$\%\&\'\(\ \)\*\+\,\-\.\:\;\<\=\>\?\@\[\]\^\_\`\{\|\}\~\-0-9]/g.test(b);
        if (!(f ^ m)) {
            return 1
        } else {
            if (!(f)) {
                return 1
            } else {
                return 0
            }
        }
    }
    function d(b) {
        let a = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b);
        let h = /[^\w\.\@\-]/g.test(b);
        if (!(a ^ h)) {
            return 1
        } else {
            if (!(a)) {
                return 1
            } else {
                return 0
            }
        }
    }
    function h(b) {
        let c = /^[0-9 \)\(+-]/g.test(b);
        let h = /[^0-9 \\)\(+-]/g.test(b);
        if (!(c ^ h)) {
            return 1
        } else {
            if (!(c)) {
                return 1
            } else {
                return 0
            }
        }
    }
    /*function o() {
        if (jQuery('form[name="regCourseForm"] .uk-form-danger').length) {
            jQuery("#fRegCheck").attr("disabled", "disabled")
        } else {
            jQuery("#fRegCheck").removeAttr("disabled")
        }
    }*/
    function g(b) {
        let o = /[a-zA-Z]/g.test(b);
        let e = /[^A-Za-z]/g.test(b);
        let n = /[\d]/g.test(b);
        if (!(o ^ e)) {
            return 1
        } else if (!(o ^ n)) {
            return 1
        } else {
            if (!(o)) {
                return 1
            } else {
                return 0
            }
        }
    }
    let codeCountry = document.querySelector("#uUphone");
    window.intlTelInput(codeCountry, {
        geoIpLookup: function(callback) {
            $.get('https://ipinfo.io', function() {}, "jsonp").always(function(resp) {
              var countryCode = (resp && resp.country) ? resp.country : "us";
              callback(countryCode);
            });
          },
        utilsScript: "utils.js",
        nationalMode: false,
        autoPlaceholder:"polite",
        initialCountry: "auto",
    })
});